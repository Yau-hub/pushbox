window.__require=function e(t,n,o){function i(c,s){if(!n[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var r="function"==typeof __require&&__require;if(!s&&r)return r(a,!0);if(l)return l(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var v=n[c]={exports:{}};t[c][0].call(v.exports,function(e){return i(t[c][1][e]||e)},v,v.exports,e,t,n,o)}return n[c].exports}for(var l="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({common:[function(e,t){"use strict";cc._RF.push(t,"db8b31XBphC44pnJIdLHrEO","common"),cc._RF.pop()},{}],levelItem:[function(e,t){"use strict";cc._RF.push(t,"2cfd6DcvT5OTYgzh6qWc2QW","levelItem"),cc.Class({extends:cc.Component,properties:{levelNum:null,levelLock:null},start:function(){},init:function(){this.levelNum=cc.find("levelNum",this.node).getComponent(cc.Label),this.levelNum.string="1",this.levelLock=cc.find("levelLock",this.node),this.levelLock.opacity=0}}),cc._RF.pop()},{}],levelLayout:[function(e,t){"use strict";cc._RF.push(t,"fef7dUI0+VDDZg/zyXQW1yR","levelLayout"),cc.Class({extends:cc.Component,properties:{levelItem:cc.Prefab,levelList:null,levelListConten:null,levelSrollView:null,classicsLevelBtn:cc.Button,netLevelBtn:cc.Button,closeLevelBtn:cc.Button},onLoad:function(){},start:function(){this.levelList=cc.find("levelList/levelScrollView/view/content/itemList",this.node),this.levelListConten=cc.find("levelList/levelScrollView/view/content",this.node),this.levelSrollView=cc.find("levelList/levelScrollView",this.node),null==this.classicsLevelBtn&&(this.classicsLevelBtn=cc.find("levelList/classify/classicsLevel",this.node).getComponent(cc.Button)),null==this.netLevelBtn&&(this.netLevelBtn=cc.find("levelList/classify/netLevel",this.node).getComponent(cc.Button)),null==this.closeLevelBtn&&(this.closeLevelBtn=cc.find("closeLevel",this.node).getComponent(cc.Button)),this.classicsLevelBtn.node.on("click",this.loadClassicsLevelList,this),this.netLevelBtn.node.on("click",this.loadNetLevelList,this),this.closeLevelBtn.node.on("click",this.closeLevelLayout,this),this.loadClassicsLevelList()},loadClassicsLevelList:function(){var e=this;cc.find("Background/Label",this.classicsLevelBtn.node).color=cc.color(202,122,0);var t=cc.find("Background/Label",this.netLevelBtn.node);t.color=cc.color(255,255,255),t.opacity=125,this.levelList.destroyAllChildren();for(var n=0,o=10,i=function(t){var i=cc.instantiate(e.levelItem),l=t+1;1==l&&(i.getChildByName("levelNum").getComponent(cc.Label).string=l,i.getChildByName("levelLock").opacity=0),e.levelList.addChild(i),i.on("touchend",function(){cc.log("level:"+l)},e),l<=o&&(o=Math.floor(100/Math.floor(e.levelListConten.width/i.width)-1),n+=i.height+70)},l=0;l<100;l++)i(l);this.levelListConten.height=n},loadNetLevelList:function(){var e=this,t=cc.find("Background/Label",this.classicsLevelBtn.node);t.color=cc.color(255,255,255),t.opacity=125,cc.find("Background/Label",this.netLevelBtn.node).color=cc.color(202,122,0),this.levelList.destroyAllChildren();for(var n=0,o=10,i=function(t){var i=cc.instantiate(e.levelItem),l=t+1;1==l&&(i.getChildByName("levelNum").getComponent(cc.Label).string=l,i.getChildByName("levelLock").opacity=0),e.levelList.addChild(i),i.on("touchend",function(){cc.log("level:"+l)},e),l<=o&&(o=Math.floor(10/Math.floor(e.levelListConten.width/i.width)-1),n+=i.height+70)},l=0;l<10;l++)i(l);this.levelListConten.height=n},closeLevelLayout:function(){this.node.removeFromParent(),this.node.destroy()}}),cc._RF.pop()},{}],main:[function(e,t){"use strict";cc._RF.push(t,"2276c+jCHZBGYX+JxzXyKDF","main"),cc.Class({extends:cc.Component,properties:{oneSayLabel:{default:null,type:cc.Label},loginplay:cc.Button,visitorplay:cc.Button,levelLayout:cc.Prefab},onLoad:function(){this.oneSay(),null==this.loginplay&&(this.loginplay=cc.find("Canvas/mainBg/loginplay").getComponent(cc.Button)),this.loginplay.node.on("click",this.loginLevelList,this),null==this.visitorplay&&(this.visitorplay=cc.find("Canvas/mainBg/visitorplay").getComponent(cc.Button)),this.visitorplay.node.on("click",this.visitorLevelList,this)},start:function(){var e=this;this.loadImg(),setInterval(function(){e.oneSay()},1e4)},loadImg:function(){var e=cc.find("Canvas/mainBg/bingBg"),t="",n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var o=JSON.parse(n.responseText);t="https://cn.bing.com"+o.images[0].urlbase+"_720x1280.jpg",window.bgUrlBase="https://cn.bing.com"+o.images[0].urlbase,cc.assetManager.loadRemote(t,function(t,n){var o=new cc.SpriteFrame(n);e.spriteFrame=o;var i=new cc.Node;i.name="star1",i.setPosition(0,0);var l=i.addComponent(cc.Sprite);l.spriteFrame=o,l.sizeMode="CUSTOM",l.node.width=cc.winSize.width,l.node.height=cc.winSize.height,e.addChild(i)})}},n.open("get","https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1",!0),n.send()},oneSay:function(){var e=this,t=new XMLHttpRequest,n=cc.find("Canvas/mainBg/oneSay").getComponent(cc.Component);t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var o=JSON.parse(t.responseText);e.oneSayLabel&&null!=e.oneSayLabel.string?e.oneSayLabel.string=o.hitokoto+" -- "+o.from:n&&null!=n.string&&(n.string=o.hitokoto+" -- "+o.from)}},t.open("get","https://v1.hitokoto.cn/",!0),t.send()},loginLevelList:function(){window.loginType="wechat";var e=cc.find("Canvas");e?cc.loader.loadRes("levelLayout",function(t,n){if(t)console.log("Prefab error:"+t);else if(n instanceof cc.Prefab){var o=cc.instantiate(n);e.addChild(o)}else console.log("Prefab error")}):cc.console("find Canvas error")},visitorLevelList:function(){window.loginType="visitor";var e=cc.find("Canvas");e?cc.loader.loadRes("levelLayout",function(t,n){if(t)console.log("Prefab error:"+t);else if(n instanceof cc.Prefab){var o=cc.instantiate(n);e.addChild(o)}else console.log("Prefab error")}):cc.console("find Canvas error")}}),cc._RF.pop()},{}]},{},["common","levelItem","levelLayout","main"]);