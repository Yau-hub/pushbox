{"version":3,"sources":["assets\\scripts\\main.js"],"names":["window","env","bgMusic","moveMusic","cc","sys","platform","WECHAT_GAME","wx","cloud","init","user","classicsLevelNum","netLevelNum","levelIndex","bgUrlBase","levelFinishNum","loginInfo","avatarUrl","nickName","Class","Component","properties","oneSayLabel","type","Label","loginplay","Button","visitorplay","mainRank","levelLayout","Prefab","buildLevel","setting","mainShare","rankItem","onLoad","mainBindEvent","from","game","on","EVENT_SHOW","paused","pause","play","start","that","Loading","show","callFunction","name","then","res","result","total","hide","err","console","error","loadImg","oneSay","getUserInfo","initSetting","container","find","imgServeUrl","imgUrl","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","images","urlbase","assetManager","loadRemote","texture","sprite","SpriteFrame","spriteFrame","starNode","Node","setPosition","starSprite","addComponent","Sprite","sizeMode","node","width","winSize","height","opacity","addChild","opacityTimer","setInterval","clearInterval","open","send","url","getComponent","string","hitokoto","newXHR","loginLevelList","loginType","CanvasNode","onResourceLoaded","errorMessage","loadedResource","log","newMyPrefab","instantiate","loader","loadRes","visitorLevelList","showMainRank","rankPage","rankPageSize","content","removeFromParent","destroy","resource","renderMainRankList","page","pageSize","currentItemNum","childrenCount","data","length","i","getChildByName","createTime","portrait","getStorage","key","success","appId","fail","setStorage","openid","substring","Array","wxLoginBtn","director","loadScene","titString","shareAppMessage","title","query","touchMove","clickMove","relast","music","complete","setMusic","createInnerAudioContext","useWebAudioImplement","resources","load","AudioClip","clip","src","loop","playbackRate","stop"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nwindow.env = \"cloud1-5gvbuiy3dd99f63c\"\r\nwindow.bgMusic=null;\r\nwindow.moveMusic=null;\r\nif (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n    wx.cloud.init({env: window.env})\r\n}\r\nwindow.user = {};\r\nwindow.classicsLevelNum = 0;\r\nwindow.netLevelNum = 0;\r\nwindow.levelIndex = 0;\r\nwindow.bgUrlBase = '';\r\nwindow.user.levelFinishNum = 0;\r\nwindow.loginInfo = {\r\n    avatarUrl: null,\r\n    nickName: null\r\n}\r\n\r\nimport {wxLogin,Toast,Loading,formateRankTime} from \"./common\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        oneSayLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        loginplay: cc.Button,\r\n        visitorplay: cc.Button,\r\n        mainRank: cc.Button,\r\n        levelLayout: cc.Prefab,\r\n        buildLevel: cc.Button,\r\n        setting: cc.Button,\r\n        mainShare: cc.Button,\r\n        rankItem:cc.Prefab,\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    // LIFE-CYCL:E CALLBACKS:\r\n\r\n     onLoad () {\r\n        //加载一言\r\n        //  this.oneSay();\r\n         this.mainBindEvent();\r\n         window.from = 'main';\r\n         cc.game.on(cc.game.EVENT_SHOW, function(){\r\n             // console.log(\"重新返回游戏\");\r\n             if(window.bgMusic && !window.bgMusic.paused) window.bgMusic.pause();\r\n             if(window.bgMusic && window.bgMusic.paused) window.bgMusic.play();\r\n         },this);\r\n     },\r\n\r\n    start () {\r\n        let that = this;\r\n\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME){\r\n\r\n            Loading.show();\r\n            wx.cloud.callFunction({\r\n                name: 'getClassicsLevelNum'\r\n            }).then(res => {\r\n                window.classicsLevelNum = res.result.total;\r\n                Loading.hide();\r\n\r\n            }).catch(err => {\r\n                console.error(err)\r\n            })\r\n\r\n        }\r\n\r\n\r\n        this.loadImg();\r\n        this.oneSay();\r\n\r\n        this.getUserInfo();\r\n        this.initSetting();\r\n\r\n\r\n    },\r\n    // update (dt) {},\r\n\r\n    loadImg: function(){\r\n        var that = this;\r\n        let container = cc.find('Canvas/mainBg/bingBg');//图片呈现位置\r\n        var imgServeUrl = 'https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1';\r\n        var imgUrl = '';\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response =  JSON.parse(xhr.responseText);\r\n                imgUrl = 'https://cn.bing.com' + response.images[0].urlbase + '_720x1280.jpg'\r\n                window.bgUrlBase = 'https://cn.bing.com' + response.images[0].urlbase;\r\n\r\n                cc.assetManager.loadRemote(imgUrl, function (err, texture) {\r\n                    var sprite  = new cc.SpriteFrame(texture);\r\n                    container.spriteFrame = sprite;\r\n                    //创建一个使用图片资源的新节点对象\r\n                    let starNode = new cc.Node(); //创建一个新节点\r\n                    starNode.name = \"star1\";\r\n                    starNode.setPosition(0,0);\r\n                    let starSprite = starNode.addComponent(cc.Sprite); //增加精灵组件\r\n                    starSprite.spriteFrame = sprite; //设置精灵组件图片资源\r\n                    starSprite.sizeMode = 'CUSTOM';\r\n                    starSprite.node.width = cc.winSize.width\r\n                    starSprite.node.height = cc.winSize.height\r\n                    starNode.opacity = 0;\r\n                    container.addChild(starNode); //场景中增加新节点\r\n                    var opacity = 0;\r\n                    var opacityTimer = setInterval(function () {\r\n                        opacity += 1;\r\n                        starNode.opacity = opacity;\r\n                        if(opacity>=255){\r\n                            clearInterval(opacityTimer)\r\n                            opacityTimer = null;\r\n                        }\r\n                    },5)\r\n                });\r\n            }\r\n        };\r\n        xhr.open(\"get\", imgServeUrl, true);\r\n        xhr.send();\r\n    },\r\n    oneSay(){\r\n        let that = this;\r\n        let url = \"https://v1.hitokoto.cn/\";\r\n        let xhr = new XMLHttpRequest();\r\n        let oneSayLabel = cc.find(\"Canvas/mainBg/oneSay\").getComponent(cc.Label);\r\n\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response =  JSON.parse(xhr.responseText);\r\n               if(that.oneSayLabel && that.oneSayLabel.string != null) that.oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n               else if(oneSayLabel && oneSayLabel.string != null ) oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n            }\r\n        };\r\n        xhr.open(\"get\", url, true);\r\n        xhr.send();\r\n        this.oneSayLabel.node.on('touchend', function(){\r\n            let newXHR = new XMLHttpRequest();\r\n            newXHR.onreadystatechange = function () {\r\n                if (newXHR.readyState == 4 && (newXHR.status >= 200 && newXHR.status < 400)) {\r\n                    var response =  JSON.parse(newXHR.responseText);\r\n                    if(that.oneSayLabel && that.oneSayLabel.string != null) that.oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n                    else if(oneSayLabel && oneSayLabel.string != null ) oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n                }\r\n            };\r\n            newXHR.open(\"get\", url, true);\r\n            newXHR.send();\r\n        }, this)\r\n    },\r\n    //授权登录显示关卡列表\r\n    loginLevelList(){\r\n\r\n        window.loginType = 'wechat';\r\n        var CanvasNode = cc.find('Canvas');\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('levelLayout', onResourceLoaded );\r\n    },\r\n    //不登录登录显示关卡列表\r\n    visitorLevelList(){\r\n\r\n        window.loginType = 'visitor';\r\n        var CanvasNode = cc.find('Canvas');\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('levelLayout', onResourceLoaded );\r\n\r\n        // let levelList = cc.instantiate(this.levelLayout);\r\n        // this.node.addChild(levelList);\r\n    },\r\n    showMainRank(){\r\n        let that = this;\r\n        var CanvasNode = cc.find('Canvas');\r\n        var rankPage = 1,rankPageSize = 50;\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            var content = cc.find('rankList/view/content',newMyPrefab);\r\n\r\n            cc.find('close',newMyPrefab).on(\"click\",function () {\r\n                newMyPrefab.removeFromParent();\r\n                newMyPrefab.destroy();\r\n            },this)\r\n            if(that.rankItem == null){\r\n                cc.loader.loadRes('rankItem', function (err,resource) {\r\n                    that.rankItem = cc.instantiate(resource);\r\n                    that.renderMainRankList(content,rankPage,rankPageSize);\r\n                } );\r\n            }else{\r\n                that.renderMainRankList(content,rankPage,rankPageSize);\r\n            }\r\n           cc.find('rankList',newMyPrefab).on('bounce-bottom', function(){\r\n               rankPage++;\r\n               that.renderMainRankList(content,rankPage,rankPageSize);\r\n           }, this);\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('rankLayout', onResourceLoaded );\r\n    },\r\n    renderMainRankList(content,page,pageSize){\r\n        let that = this;\r\n        let currentItemNum = content.childrenCount;\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME){\r\n            Loading.show();\r\n            wx.cloud.callFunction({\r\n                name: 'queryUser',\r\n                data:{\r\n                    page,\r\n                    pageSize\r\n                }\r\n            }).then(res => {\r\n                Loading.hide();\r\n                let rankItem = null;\r\n                if(res && res.result.data.length>0){\r\n                    for(var i = 1; i<= res.result.data.length; i++){\r\n                        var data =  res.result.data[i-1];\r\n                        let node = cc.instantiate(that.rankItem);\r\n                        if(rankItem == null) rankItem = node;\r\n                        node.getChildByName('tdRank').getComponent(cc.Label).string = i+currentItemNum;\r\n                        node.getChildByName('tdDate').getComponent(cc.Label).string = formateRankTime(data.createTime);\r\n                        node.getChildByName('tdLevel').getComponent(cc.Label).string = data.levelFinishNum;\r\n                        if(data.portrait){\r\n                            cc.assetManager.loadRemote(data.portrait+'?aaa=aa.jpg',  function (err, texture) {\r\n                                var sprite  = new cc.SpriteFrame(texture);\r\n                                cc.find('mask/Image',node.getChildByName('tdPortrait')).getComponent(cc.Sprite).spriteFrame = sprite;\r\n                            });\r\n                        }\r\n                        if(data.nickName){\r\n                            node.getChildByName('tdName').getComponent(cc.Label).string = \" \"+data.nickName+\" \";\r\n                        }\r\n                        content.addChild(node);\r\n                    }\r\n                    content.height = content.childrenCount * rankItem.height;\r\n                }else{\r\n                    Toast(\"没有更多数据了\",1500)\r\n                }\r\n\r\n\r\n            }).catch(err => {\r\n                console.error(err)\r\n                Loading.hide();\r\n            })\r\n        }\r\n\r\n    },\r\n\r\n    getUserInfo(){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            //获取缓存appId判断是否第一次进入游戏\r\n            wx.getStorage({\r\n                key: 'appId',\r\n                success (res) {\r\n                    window.user.appId = res.data;\r\n                    wx.cloud.callFunction({\r\n                        name: 'queryUser',\r\n                        data:{\r\n                            appId: window.user.appId\r\n                        }\r\n                    }).then(res => {\r\n                        if(res && res.result.data.length>0){\r\n                            window.user.levelFinishNum = res.result.data[0].levelFinishNum;\r\n                            window.user.classicsLevelNum = res.result.data[0].classicsLevelNum;\r\n                            window.user.netLevelNum = res.result.data[0].netLevelNum;\r\n                        }\r\n\r\n                    }).catch(err => {\r\n                        console.error(err)\r\n                    })\r\n                },\r\n                fail(err){\r\n\r\n\r\n                    wx.cloud.callFunction({\r\n                        name: 'login'\r\n                    }).then(res => {\r\n                        if(res && res.result){\r\n                            wx.setStorage({\r\n                                key: \"appId\",\r\n                                data:res.result.openid\r\n                            })\r\n                            window.user.appId = res.result.openid;\r\n                            window.user.classicsLevelNum = 0;\r\n                            window.user.netLevelNum = 0;\r\n                            window.user.levelFinishNum = 0;\r\n\r\n                            wx.cloud.callFunction({\r\n                                name: 'queryUser',\r\n                                data:{\r\n                                    appId: window.user.appId\r\n                                }\r\n                            }).then(res => {\r\n\r\n                                if(res && res.result.data.length<=0){\r\n                                    //注册用户信息\r\n                                    wx.cloud.callFunction({\r\n                                        name: 'addUser',\r\n                                        data: {\r\n                                            appId: window.user.appId,\r\n                                            nickName: window.loginInfo.nickName? window.loginInfo.nickName:'游客'+window.user.appId.substring(window.user.appId.length-5),\r\n                                            portrait: window.loginInfo.avatarUrl\r\n                                        }\r\n\r\n                                    }).then(res => {\r\n                                        console.log(res)\r\n                                    }).catch(err => {\r\n                                        console.error(err)\r\n                                    })\r\n                                }\r\n\r\n                            }).catch(err => {\r\n                                console.error(err)\r\n                            })\r\n\r\n                        }\r\n                    }).catch(err => {\r\n                        console.error(err)\r\n                    })\r\n\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mainBindEvent(){\r\n        let that = this;\r\n        //添加授权按钮\r\n        wxLogin(function (res) {\r\n            window.loginInfo = {\r\n                avatarUrl: res.avatarUrl,\r\n                nickName: res.nickName\r\n            }\r\n        },function () {\r\n            console.log('授权失败')\r\n        },this.loginplay.node);\r\n        //开始游戏按钮\r\n        if(this.loginplay == null) this.loginplay = cc.find('Canvas/mainBg/loginplay').getComponent(cc.Button)\r\n        this.loginplay.node.on('click', this.loginLevelList, this)\r\n        if(this.visitorplay == null) this.visitorplay = cc.find('Canvas/mainBg/visitorplay').getComponent(cc.Button)\r\n        this.visitorplay.node.on('click', this.visitorLevelList, this)\r\n        if(this.mainRank == null) this.mainRank = cc.find('Canvas/mainBg/mainRank').getComponent(cc.Button)\r\n        this.mainRank.node.on('click', this.showMainRank, this)\r\n\r\n        if(this.buildLevel == null) this.buildLevel = cc.find('Canvas/mainBg/buildLevel').getComponent(cc.Button)\r\n        this.buildLevel.node.on('click', function () {\r\n            window.buildLevel = new Array();\r\n            if(window.wxLoginBtn ) window.wxLoginBtn.destroy();\r\n            cc.director.loadScene(\"build\");\r\n\r\n        }, this)\r\n\r\n\r\n        if(this.mainShare == null) this.mainShare = cc.find('Canvas/mainBg/mainShare').getComponent(cc.Button);\r\n        this.mainShare.node.on('click', function () {\r\n            if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                var titString =  '快来挑战“益智推箱”小游戏吧！';\r\n                wx.shareAppMessage({\r\n                    title: titString,\r\n                    // imageUrl: data.url,\r\n                    query: '分享',\r\n                })\r\n\r\n            }\r\n        }, this)\r\n\r\n\r\n        if(this.setting == null) this.setting = cc.find('Canvas/mainBg/setting').getComponent(cc.Button);\r\n        this.setting.node.on('click', function () {\r\n\r\n            var CanvasNode = cc.find('Canvas');\r\n            if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n            var onResourceLoaded = function(errorMessage, loadedResource )\r\n            {\r\n                if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n                if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n                var newMyPrefab = cc.instantiate( loadedResource );\r\n                cc.find('settingContain/closeSetting',newMyPrefab).on('click',function () {\r\n                    newMyPrefab.removeFromParent();\r\n                    newMyPrefab.destroy();\r\n                },this)\r\n\r\n                let touchMove = cc.find('settingContain/touchMove/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let clickMove = cc.find('settingContain/clickMove/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let relast = cc.find('settingContain/relast/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let music = cc.find('settingContain/music/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n\r\n                if(window.setting.touchMove) touchMove.string = '关闭触摸移动';\r\n                    else touchMove.string = '开启触摸移动';\r\n                if(window.setting.clickMove) clickMove.string = '关闭按键移动';\r\n                else clickMove.string = '开启按键移动';\r\n                if(window.setting.relast) relast.string = '关闭回退功能';\r\n                else relast.string = '开启回退功能';\r\n                if(window.setting.music) music.string = '关闭音效';\r\n                else music.string = '开启音效';\r\n\r\n                cc.find('settingContain/touchMove',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n                                //触摸&点击开启\r\n                                if(res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.touchMove = false;\r\n                                    touchMove.string = '开启触摸移动'\r\n                                }\r\n                                //触摸关闭 点击开启\r\n                                else if(!res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.touchMove = true;\r\n                                    touchMove.string = '关闭触摸移动'\r\n                                }\r\n                                else{\r\n                                    //提示至少开启一种移动方式\r\n                                    Toast('至少开启一种移动方式!',1500)\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/clickMove',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n                                //触摸&点击开启\r\n                                if(res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.clickMove = false;\r\n                                    clickMove.string = '开启按键移动'\r\n                                }\r\n                                //触摸关闭 点击开启\r\n                                else if(res.data.touchMove && !res.data.clickMove){\r\n                                    window.setting.clickMove = true;\r\n                                    clickMove.string = '关闭按键移动'\r\n                                }\r\n                                else{\r\n                                    //提示至少开启一种移动方式\r\n                                    Toast('至少开启一种移动方式!',1500)\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/relast',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n\r\n                                //回退功能\r\n                                if(res.data.relast){\r\n                                    window.setting.relast = false;\r\n                                    relast.string = '开启回退功能'\r\n                                }else{\r\n                                    window.setting.relast = true;\r\n                                    relast.string = '关闭回退功能'\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/music',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n\r\n                                //回退功能\r\n                                if(res.data.music){\r\n                                    window.setting.music = false;\r\n                                    music.string = '开启音效'\r\n                                }else{\r\n                                    window.setting.music = true;\r\n                                    music.string = '关闭音效'\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting,\r\n                                    complete(){\r\n                                        that.setMusic();\r\n                                    }\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n\r\n                CanvasNode.addChild( newMyPrefab );\r\n            };\r\n            cc.loader.loadRes('settingDialog', onResourceLoaded );\r\n        }, this)\r\n\r\n    },\r\n    initSetting(){\r\n        var that = this;\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getStorage({\r\n                key: 'setting',\r\n                success(res) {\r\n                    window.setting = res.data;\r\n                },\r\n                fail(err) {\r\n                    window.setting = {\r\n                        touchMove: true,\r\n                        clickMove: true,\r\n                        relast: false,\r\n                        music: false\r\n                    };\r\n                    wx.setStorage({\r\n                        key: 'setting',\r\n                        data: window.setting\r\n                    })\r\n                },\r\n                complete(){\r\n                    that.setMusic();\r\n                }\r\n            })\r\n        }\r\n    },\r\n    setMusic(){\r\n        if(cc.sys.platform !== cc.sys.WECHAT_GAME) return;\r\n\r\n        if(window.setting.music){\r\n            if(!window.bgMusic || !window.moveMusic){\r\n                window.bgMusic = wx.createInnerAudioContext();\r\n                window.moveMusic = wx.createInnerAudioContext({useWebAudioImplement:true});\r\n                cc.resources.load(\"music/bg_music\", cc.AudioClip, null, function (err, clip) {\r\n                    window.bgMusic.src =clip.url;\r\n                    window.bgMusic.loop = true;\r\n                    if(window.bgMusic && !window.bgMusic.paused) window.bgMusic.pause();\r\n                    if(window.bgMusic && window.bgMusic.paused) window.bgMusic.play();\r\n                });\r\n                cc.resources.load(\"music/move_music\", cc.AudioClip, null, function (err, clip) {\r\n                    window.moveMusic.src =clip.url;\r\n                    window.moveMusic.loop = false;\r\n                    window.moveMusic.playbackRate = 2;\r\n                });\r\n            }\r\n\r\n        }else{\r\n            if(window.bgMusic){\r\n                window.bgMusic.stop();\r\n                window.bgMusic.destroy();\r\n            }\r\n            if(window.moveMusic){\r\n                window.moveMusic.stop();\r\n                window.moveMusic.destroy();\r\n            }\r\n            window.bgMusic = null;\r\n            window.moveMusic = null;\r\n        }\r\n    }\r\n});\r\n"]}