{"version":3,"sources":["assets\\scripts\\main.js"],"names":["window","env","bgMusic","moveMusic","createScenseUploadAd","skipLevelAd","auditLevelAd","checkSolutionLevelAd","gameCircle","cloudFunctionBaseUrl","destroy","cc","sys","platform","WECHAT_GAME","wx","cloud","init","createInterstitialAd","createRewardedVideoAd","adUnitId","multiton","onError","err","user","classicsLevelNum","netLevelNum","levelIndex","bgUrlBase","levelFinishNum","loginInfo","avatarUrl","nickName","Class","Component","properties","oneSayLabel","type","Label","loginplay","Button","visitorplay","mainRank","levelLayout","Prefab","reviewLayout","reviewLevel","buildLevel","setting","mainShare","rankItem","onLoad","mainBindEvent","from","game","on","EVENT_SHOW","paused","pause","play","start","that","Loading","show","request","url","method","data","success","res","total","hide","error","removeStorage","key","loadImg","oneSay","getUserInfo","initSetting","container","find","imgServeUrl","imgUrl","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","images","urlbase","assetManager","loadRemote","texture","sprite","SpriteFrame","spriteFrame","starNode","Node","name","setPosition","starSprite","addComponent","Sprite","sizeMode","node","width","winSize","height","opacity","addChild","opacityTimer","setInterval","clearInterval","open","send","getComponent","string","hitokoto","newXHR","loginLevelList","loginType","CanvasNode","console","onResourceLoaded","errorMessage","loadedResource","log","newMyPrefab","instantiate","loader","loadRes","visitorLevelList","showReviewLevel","reviewPage","reviewPageSize","content","removeFromParent","resource","renderReviewLevelList","page","pageSize","currentItemNum","childrenCount","length","i","getChildByName","createTime","useStepNum","portrait","t","wxLoginBtn","setStorage","uploadInfo","reviewId","_id","appId","director","loadScene","showMainRank","rankPage","rankPageSize","renderMainRankList","getStorage","roles","fail","login","code","substring","Array","titString","shareAppMessage","title","query","touchMove","clickMove","relast","music","complete","setMusic","sysInfo","getSystemInfoSync","createGameClubButton","icon","style","left","windowWidth","top","windowHeight","createInnerAudioContext","useWebAudioImplement","resources","load","AudioClip","clip","src","loop","playbackRate","stop"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nwindow.env = \"cloud1-5gvbuiy3dd99f63c\"\r\nwindow.bgMusic=null;\r\nwindow.moveMusic=null;\r\nwindow.createScenseUploadAd = null;\r\nwindow.skipLevelAd = null;\r\nwindow.auditLevelAd = null;\r\nwindow.checkSolutionLevelAd = null;\r\nwindow.gameCircle = null;\r\nwindow.cloudFunctionBaseUrl = 'https://ac327917-ed0d-4195-8290-65fac58e2bf9.bspapp.com';\r\nif(window.auditLevelAd) window.auditLevelAd.destroy();\r\nif (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n    wx.cloud.init({env: window.env})\r\n    //广告初始化\r\n    if (wx.createInterstitialAd){\r\n        window.skipLevelAd = wx.createRewardedVideoAd({\r\n            adUnitId: 'adunit-d408eadf9ac9c0a9',\r\n            multiton: true\r\n        })\r\n        window.skipLevelAd.onError(err => {});\r\n        window.checkSolutionLevelAd = wx.createRewardedVideoAd({\r\n            adUnitId: 'adunit-110d097df5bc8eb0',\r\n            multiton: true\r\n        })\r\n        window.checkSolutionLevelAd.onError(err => {});\r\n        window.createScenseUploadAd = wx.createInterstitialAd({\r\n            adUnitId: 'adunit-e7f23b52c9d59315'\r\n        })\r\n        window.createScenseUploadAd.onError(err => {window.createScenseUploadAd =null;});\r\n    }\r\n}\r\nwindow.user = {};\r\nwindow.classicsLevelNum = 0;\r\nwindow.netLevelNum = 0;\r\nwindow.levelIndex = 0;\r\nwindow.bgUrlBase = '';\r\nwindow.user.levelFinishNum = 0;\r\nwindow.loginInfo = {\r\n    avatarUrl: null,\r\n    nickName: null\r\n};\r\nwindow.gameCircle = null;\r\n\r\nimport {wxLogin,Toast,Loading,formateRankTime} from \"./common\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        oneSayLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        loginplay: cc.Button,\r\n        visitorplay: cc.Button,\r\n        mainRank: cc.Button,\r\n        levelLayout: cc.Prefab,\r\n        reviewLayout: cc.Prefab,\r\n        reviewLevel: cc.Button,\r\n        buildLevel: cc.Button,\r\n        setting: cc.Button,\r\n        mainShare: cc.Button,\r\n        rankItem:cc.Prefab,\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    // LIFE-CYCL:E CALLBACKS:\r\n\r\n     onLoad () {\r\n        //加载一言\r\n        //  this.oneSay();\r\n         this.mainBindEvent();\r\n         window.from = 'main';\r\n         cc.game.on(cc.game.EVENT_SHOW, function(){\r\n             // console.log(\"重新返回游戏\");\r\n             if(window.bgMusic && !window.bgMusic.paused) window.bgMusic.pause();\r\n             if(window.bgMusic && window.bgMusic.paused) window.bgMusic.play();\r\n         },this);\r\n\t\t \r\n\t\t \r\n\t\t \r\n\t\t \r\n     },\r\n\r\n    start () {\r\n        let that = this;\r\n\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME){\r\n\r\n            Loading.show();\r\n            wx.request({\r\n                url: cloudFunctionBaseUrl+\"/getClassicsLevelNum\",\r\n                method: 'POST',\r\n                data:{},\r\n                success: (res) => {\r\n                    window.classicsLevelNum = res.data.total;\r\n                    Loading.hide();\r\n                },error:(err)=>{\r\n                    Loading.hide();\r\n                }\r\n            });\r\n\r\n            // wx.cloud.callFunction({\r\n            //     name: 'getClassicsLevelNum'\r\n            // }).then(res => {\r\n            //     window.classicsLevelNum = res.result.total;\r\n            //     Loading.hide();\r\n            //\r\n            // }).catch(err => {\r\n            //     console.error(err)\r\n            // })\r\n\r\n            wx.removeStorage({\r\n                key: \"initLevel\"\r\n            })\r\n\r\n        }\r\n\r\n\r\n        this.loadImg();\r\n        this.oneSay();\r\n\r\n        this.getUserInfo();\r\n        this.initSetting();\r\n\r\n\r\n\r\n    },\r\n    // update (dt) {},\r\n\r\n    loadImg: function(){\r\n        var that = this;\r\n        let container = cc.find('Canvas/mainBg/bingBg');//图片呈现位置\r\n        var imgServeUrl = 'https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1';\r\n        var imgUrl = '';\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response =  JSON.parse(xhr.responseText);\r\n                imgUrl = 'https://cn.bing.com' + response.images[0].urlbase + '_720x1280.jpg'\r\n                window.bgUrlBase = 'https://cn.bing.com' + response.images[0].urlbase;\r\n\r\n                cc.assetManager.loadRemote(imgUrl, function (err, texture) {\r\n                    var sprite  = new cc.SpriteFrame(texture);\r\n                    container.spriteFrame = sprite;\r\n                    //创建一个使用图片资源的新节点对象\r\n                    let starNode = new cc.Node(); //创建一个新节点\r\n                    starNode.name = \"star1\";\r\n                    starNode.setPosition(0,0);\r\n                    let starSprite = starNode.addComponent(cc.Sprite); //增加精灵组件\r\n                    starSprite.spriteFrame = sprite; //设置精灵组件图片资源\r\n                    starSprite.sizeMode = 'CUSTOM';\r\n                    starSprite.node.width = cc.winSize.width\r\n                    starSprite.node.height = cc.winSize.height\r\n                    starNode.opacity = 0;\r\n                    container.addChild(starNode); //场景中增加新节点\r\n                    var opacity = 0;\r\n                    var opacityTimer = setInterval(function () {\r\n                        opacity += 1;\r\n                        starNode.opacity = opacity;\r\n                        if(opacity>=255){\r\n                            clearInterval(opacityTimer)\r\n                            opacityTimer = null;\r\n                        }\r\n                    },5)\r\n                });\r\n            }\r\n        };\r\n        xhr.open(\"get\", imgServeUrl, true);\r\n        xhr.send();\r\n    },\r\n    oneSay(){\r\n        let that = this;\r\n        let url = \"https://v1.hitokoto.cn/\";\r\n        let xhr = new XMLHttpRequest();\r\n        let oneSayLabel = cc.find(\"Canvas/mainBg/oneSay\").getComponent(cc.Label);\r\n\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response =  JSON.parse(xhr.responseText);\r\n               if(that.oneSayLabel && that.oneSayLabel.string != null) that.oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n               else if(oneSayLabel && oneSayLabel.string != null ) oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n            }\r\n        };\r\n        xhr.open(\"get\", url, true);\r\n        xhr.send();\r\n        this.oneSayLabel.node.on('touchend', function(){\r\n            let newXHR = new XMLHttpRequest();\r\n            newXHR.onreadystatechange = function () {\r\n                if (newXHR.readyState == 4 && (newXHR.status >= 200 && newXHR.status < 400)) {\r\n                    var response =  JSON.parse(newXHR.responseText);\r\n                    if(that.oneSayLabel && that.oneSayLabel.string != null) that.oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n                    else if(oneSayLabel && oneSayLabel.string != null ) oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n                }\r\n            };\r\n            newXHR.open(\"get\", url, true);\r\n            newXHR.send();\r\n        }, this)\r\n    },\r\n    //授权登录显示关卡列表\r\n    loginLevelList(){\r\n        window.loginType = 'wechat';\r\n        var CanvasNode = cc.find('Canvas');\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('levelLayout', onResourceLoaded );\r\n    },\r\n\r\n    //不登录登录显示关卡列表\r\n    visitorLevelList(){\r\n        window.loginType = 'visitor';\r\n        var CanvasNode = cc.find('Canvas');\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('levelLayout', onResourceLoaded );\r\n\r\n        // let levelList = cc.instantiate(this.levelLayout);\r\n        // this.node.addChild(levelList);\r\n    },\r\n    showReviewLevel(){\r\n        let that = this;\r\n        var CanvasNode = cc.find('Canvas');\r\n        var reviewPage = 1,reviewPageSize = 50;\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            var content = cc.find('reviewLevelList/view/content',newMyPrefab);\r\n\r\n            cc.find('close',newMyPrefab).on(\"click\",function () {\r\n                newMyPrefab.removeFromParent();\r\n                newMyPrefab.destroy();\r\n            },this)\r\n            if(that.rankItem == null){\r\n                cc.loader.loadRes('rankItem', function (err,resource) {\r\n                    that.rankItem = cc.instantiate(resource);\r\n                    that.renderReviewLevelList(content,reviewPage,reviewPageSize);\r\n                } );\r\n            }else{\r\n                that.renderReviewLevelList(content,reviewPage,reviewPageSize);\r\n            }\r\n            cc.find('reviewLevelList',newMyPrefab).on('bounce-bottom', function(){\r\n                reviewPage++;\r\n                that.renderReviewLevelList(content,reviewPage,reviewPageSize);\r\n            }, this);\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('reviewLayout', onResourceLoaded );\r\n    },\r\n    renderReviewLevelList(content,page,pageSize){\r\n        let that = this;\r\n        let currentItemNum = content.childrenCount;\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME){\r\n            Loading.show();\r\n            wx.request({\r\n                url: cloudFunctionBaseUrl+\"/queryReviewLevel\",\r\n                method: 'POST',\r\n                data:{\r\n                    page,\r\n                    pageSize\r\n                },\r\n                success: (res) => {\r\n                    Loading.hide();\r\n                    let rankItem = null;\r\n                    if(res && res.data.data.length>0){\r\n                        for(var i = 1; i<= res.data.data.length; i++){\r\n\r\n                            (function(i){\r\n                                var data =  res.data.data[i-1];\r\n                                let node = cc.instantiate(that.rankItem);\r\n                                if(rankItem == null) rankItem = node;\r\n                                node.getChildByName('tdRank').getComponent(cc.Label).string = i+currentItemNum;\r\n                                node.getChildByName('tdDate').getComponent(cc.Label).string = formateRankTime(data.createTime);\r\n                                node.getChildByName('tdLevel').getComponent(cc.Label).string = data.useStepNum;\r\n                                if(data.portrait){\r\n                                    cc.assetManager.loadRemote(data.portrait+'?aaa=aa.jpg',  function (err, texture) {\r\n                                        var sprite  = new cc.SpriteFrame(texture);\r\n                                        cc.find('mask/Image',node.getChildByName('tdPortrait')).getComponent(cc.Sprite).spriteFrame = sprite;\r\n                                    });\r\n                                }\r\n                                if(data.nickName){\r\n                                    node.getChildByName('tdName').getComponent(cc.Label).string = \" \"+data.nickName+\" \";\r\n                                }\r\n                                node.on('touchend',\r\n                                    function(t){\r\n\r\n                                        if(window.wxLoginBtn ) window.wxLoginBtn.destroy();\r\n                                        wx.setStorage({\r\n                                            key: 'reviewLevel',\r\n                                            data: data.content,\r\n                                            success(){\r\n                                                window.uploadInfo = {};\r\n                                                window.from = 'review';\r\n                                                window.reviewId = data._id;\r\n                                                window.uploadInfo.appId = data.appId;\r\n                                                window.uploadInfo.nickName = data.nickName;\r\n                                                window.uploadInfo.portrait = data.portrait;\r\n                                                window.uploadInfo.createTime = data.createTime;\r\n\r\n                                                cc.director.loadScene(\"game\");\r\n                                            }\r\n                                        })\r\n\r\n                                    },this)\r\n                                content.addChild(node);\r\n                            })(i)\r\n\r\n\r\n                        }\r\n                        content.height = content.childrenCount * rankItem.height;\r\n                    }else{\r\n                        Toast(\"没有更多数据了\",1500)\r\n                    }\r\n                },\r\n                error: ()=>{\r\n                    Loading.hide();\r\n                }\r\n            });\r\n            // wx.cloud.callFunction({\r\n            //     name: 'queryReviewLevel',\r\n            //     data:{\r\n            //         page,\r\n            //         pageSize\r\n            //     }\r\n            // }).then(res => {\r\n            //     Loading.hide();\r\n            //     let rankItem = null;\r\n            //     if(res && res.result.data.length>0){\r\n            //         for(var i = 1; i<= res.result.data.length; i++){\r\n            //\r\n            //             (function(i){\r\n            //                 var data =  res.result.data[i-1];\r\n            //                 let node = cc.instantiate(that.rankItem);\r\n            //                 if(rankItem == null) rankItem = node;\r\n            //                 node.getChildByName('tdRank').getComponent(cc.Label).string = i+currentItemNum;\r\n            //                 node.getChildByName('tdDate').getComponent(cc.Label).string = formateRankTime(data.createTime);\r\n            //                 node.getChildByName('tdLevel').getComponent(cc.Label).string = data.useStepNum;\r\n            //                 if(data.portrait){\r\n            //                     cc.assetManager.loadRemote(data.portrait+'?aaa=aa.jpg',  function (err, texture) {\r\n            //                         var sprite  = new cc.SpriteFrame(texture);\r\n            //                         cc.find('mask/Image',node.getChildByName('tdPortrait')).getComponent(cc.Sprite).spriteFrame = sprite;\r\n            //                     });\r\n            //                 }\r\n            //                 if(data.nickName){\r\n            //                     node.getChildByName('tdName').getComponent(cc.Label).string = \" \"+data.nickName+\" \";\r\n            //                 }\r\n            //                 node.on('touchend',\r\n            //                     function(t){\r\n            //\r\n            //                         if(window.wxLoginBtn ) window.wxLoginBtn.destroy();\r\n            //                         wx.setStorage({\r\n            //                             key: 'reviewLevel',\r\n            //                             data: data.content,\r\n            //                             success(){\r\n            //                                 window.uploadInfo = {};\r\n            //                                 window.from = 'review';\r\n            //                                 window.reviewId = data._id;\r\n            //                                 window.uploadInfo.appId = data.appId;\r\n            //                                 window.uploadInfo.nickName = data.nickName;\r\n            //                                 window.uploadInfo.portrait = data.portrait;\r\n            //                                 window.uploadInfo.createTime = data.createTime;\r\n            //\r\n            //                                 cc.director.loadScene(\"game\");\r\n            //                             }\r\n            //                         })\r\n            //\r\n            //                     },this)\r\n            //                 content.addChild(node);\r\n            //             })(i)\r\n            //\r\n            //\r\n            //         }\r\n            //         content.height = content.childrenCount * rankItem.height;\r\n            //     }else{\r\n            //         Toast(\"没有更多数据了\",1500)\r\n            //     }\r\n            //\r\n            //\r\n            // }).catch(err => {\r\n            //     console.error(err)\r\n            //     Loading.hide();\r\n            // })\r\n        }\r\n\r\n    },\r\n    showMainRank(){\r\n        let that = this;\r\n        var CanvasNode = cc.find('Canvas');\r\n        var rankPage = 1,rankPageSize = 50;\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            var content = cc.find('rankList/view/content',newMyPrefab);\r\n\r\n            cc.find('close',newMyPrefab).on(\"click\",function () {\r\n                newMyPrefab.removeFromParent();\r\n                newMyPrefab.destroy();\r\n            },this)\r\n            if(that.rankItem == null){\r\n                cc.loader.loadRes('rankItem', function (err,resource) {\r\n                    that.rankItem = cc.instantiate(resource);\r\n                    that.renderMainRankList(content,rankPage,rankPageSize);\r\n                } );\r\n            }else{\r\n                that.renderMainRankList(content,rankPage,rankPageSize);\r\n            }\r\n           cc.find('rankList',newMyPrefab).on('bounce-bottom', function(){\r\n               rankPage++;\r\n               that.renderMainRankList(content,rankPage,rankPageSize);\r\n           }, this);\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('rankLayout', onResourceLoaded );\r\n    },\r\n    renderMainRankList(content,page,pageSize){\r\n        let that = this;\r\n        let currentItemNum = content.childrenCount;\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME){\r\n\r\n            Loading.show();\r\n            wx.request({\r\n                url: cloudFunctionBaseUrl+\"/queryUser\",\r\n                method: 'POST',\r\n                data:{\r\n                    page,\r\n                    pageSize\r\n                },\r\n                success: (res) => {\r\n                    Loading.hide();\r\n                    let rankItem = null;\r\n                    if(res && res.data.data.length>0){\r\n                        for(var i = 1; i<= res.data.data.length; i++){\r\n                            var data =  res.data.data[i-1];\r\n                            let node = cc.instantiate(that.rankItem);\r\n                            if(rankItem == null) rankItem = node;\r\n                            node.getChildByName('tdRank').getComponent(cc.Label).string = i+currentItemNum;\r\n                            node.getChildByName('tdDate').getComponent(cc.Label).string = formateRankTime(data.createTime);\r\n                            node.getChildByName('tdLevel').getComponent(cc.Label).string = data.levelFinishNum;\r\n                            if(data.portrait){\r\n                                cc.assetManager.loadRemote(data.portrait+'?aaa=aa.jpg',  function (err, texture) {\r\n                                    var sprite  = new cc.SpriteFrame(texture);\r\n                                    cc.find('mask/Image',node.getChildByName('tdPortrait')).getComponent(cc.Sprite).spriteFrame = sprite;\r\n                                });\r\n                            }\r\n                            if(data.nickName){\r\n                                node.getChildByName('tdName').getComponent(cc.Label).string = \" \"+data.nickName+\" \";\r\n                            }\r\n                            content.addChild(node);\r\n                        }\r\n                        content.height = content.childrenCount * rankItem.height;\r\n                    }else{\r\n                        Toast(\"没有更多数据了\",1500)\r\n                    }\r\n                },\r\n                error(){\r\n                    Loading.hide();\r\n                }\r\n            });\r\n            // wx.cloud.callFunction({\r\n            //     name: 'queryUser',\r\n            //     data:{\r\n            //         page,\r\n            //         pageSize\r\n            //     }\r\n            // }).then(res => {\r\n            //     Loading.hide();\r\n            //     let rankItem = null;\r\n            //     if(res && res.result.data.length>0){\r\n            //         for(var i = 1; i<= res.result.data.length; i++){\r\n            //             var data =  res.result.data[i-1];\r\n            //             let node = cc.instantiate(that.rankItem);\r\n            //             if(rankItem == null) rankItem = node;\r\n            //             node.getChildByName('tdRank').getComponent(cc.Label).string = i+currentItemNum;\r\n            //             node.getChildByName('tdDate').getComponent(cc.Label).string = formateRankTime(data.createTime);\r\n            //             node.getChildByName('tdLevel').getComponent(cc.Label).string = data.levelFinishNum;\r\n            //             if(data.portrait){\r\n            //                 cc.assetManager.loadRemote(data.portrait+'?aaa=aa.jpg',  function (err, texture) {\r\n            //                     var sprite  = new cc.SpriteFrame(texture);\r\n            //                     cc.find('mask/Image',node.getChildByName('tdPortrait')).getComponent(cc.Sprite).spriteFrame = sprite;\r\n            //                 });\r\n            //             }\r\n            //             if(data.nickName){\r\n            //                 node.getChildByName('tdName').getComponent(cc.Label).string = \" \"+data.nickName+\" \";\r\n            //             }\r\n            //             content.addChild(node);\r\n            //         }\r\n            //         content.height = content.childrenCount * rankItem.height;\r\n            //     }else{\r\n            //         Toast(\"没有更多数据了\",1500)\r\n            //     }\r\n            //\r\n            //\r\n            // }).catch(err => {\r\n            //     console.error(err)\r\n            //     Loading.hide();\r\n            // })\r\n        }\r\n\r\n    },\r\n\r\n    getUserInfo(){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            //获取缓存appId判断是否第一次进入游戏\r\n            wx.getStorage({\r\n                key: 'appId',\r\n                success (res) {\r\n                    window.user.appId = res.data;\r\n\t\t\t\t\twx.request({\r\n\t\t\t\t\t      url: cloudFunctionBaseUrl+\"/queryUser\",\r\n                          method: 'POST',\r\n\t\t\t\t\t\t  data:{\r\n\t\t\t\t\t\t      appId: window.user.appId\r\n\t\t\t\t\t\t  },\r\n\t\t\t\t\t      success: (res) => {\r\n                              if(res && res.data.data.length>0){\r\n                                  window.user.levelFinishNum = res.data.data[0].levelFinishNum;\r\n                                  window.user.classicsLevelNum = res.data.data[0].classicsLevelNum;\r\n                                  window.user.netLevelNum = res.data.data[0].netLevelNum;\r\n                                  window.user.roles = res.data.data[0].roles;\r\n\r\n                              }\r\n\t\t\t\t\t      }\r\n\t\t\t\t\t    });\r\n\r\n\r\n                    // wx.cloud.callFunction({\r\n                    //     name: 'queryUser',\r\n                    //     data:{\r\n                    //         appId: window.user.appId\r\n                    //     }\r\n                    // }).then(res => {\r\n                    //     console.log('wxcloud-success')\r\n                    //     console.log(res)\r\n                    //     if(res && res.result.data.length>0){\r\n                    //         window.user.levelFinishNum = res.result.data[0].levelFinishNum;\r\n                    //         window.user.classicsLevelNum = res.result.data[0].classicsLevelNum;\r\n                    //         window.user.netLevelNum = res.result.data[0].netLevelNum;\r\n                    //         window.user.roles = res.result.data[0].roles;\r\n                    //\r\n                    //     }\r\n                    //\r\n                    // }).catch(err => {\r\n                    //     console.error(err)\r\n                    // })\r\n                },\r\n                fail(err){\r\n                    wx.login({\r\n                        success: res => {\r\n                            if (res.code) {\r\n                                wx.request({\r\n                                    url: cloudFunctionBaseUrl+\"/login\",\r\n                                    method: 'POST',\r\n                                    data:{\r\n                                        code:res.code\r\n                                    },\r\n                                    success: (res) => {\r\n                                        console.log(res)\r\n                                        if(res && res.data){\r\n                                            wx.setStorage({\r\n                                                key: \"appId\",\r\n                                                data:res.data\r\n                                            })\r\n                                            window.user.appId = res.data;\r\n                                            window.user.classicsLevelNum = 0;\r\n                                            window.user.netLevelNum = 0;\r\n                                            window.user.levelFinishNum = 0;\r\n                                            window.user.roles = '';\r\n                                            wx.request({\r\n                                                url: cloudFunctionBaseUrl+\"/queryUser\",\r\n                                                method: 'POST',\r\n                                                data:{\r\n                                                    appId: window.user.appId\r\n                                                },\r\n                                                success: (res) => {\r\n                                                    if(res && res.data.data.length<=0){\r\n                                                        //注册用户信息\r\n                                                        wx.request({\r\n                                                            url: cloudFunctionBaseUrl+\"/addUser\",\r\n                                                            method: 'POST',\r\n                                                            data:{\r\n                                                                appId: window.user.appId,\r\n                                                                nickName: window.loginInfo.nickName? window.loginInfo.nickName:'游客'+window.user.appId.substring(window.user.appId.length-5),\r\n                                                                portrait: window.loginInfo.avatarUrl\r\n                                                            },\r\n                                                            success: (res) => {\r\n\r\n                                                            }\r\n                                                        });\r\n\r\n                                                    }else{\r\n                                                        window.user.levelFinishNum = res.data.data[0].levelFinishNum;\r\n                                                        window.user.classicsLevelNum = res.data.data[0].classicsLevelNum;\r\n                                                        window.user.netLevelNum = res.data.data[0].netLevelNum;\r\n                                                        window.user.roles = res.data.data[0].roles;\r\n                                                    }\r\n                                                }\r\n                                            });\r\n\r\n\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }}\r\n                    })\r\n\r\n                    // wx.cloud.callFunction({\r\n                    //     name: 'login'\r\n                    // }).then(res => {\r\n                    //\r\n                    //     if(res && res.result){\r\n                    //         wx.setStorage({\r\n                    //             key: \"appId\",\r\n                    //             data:res.result.openid\r\n                    //         })\r\n                    //         window.user.appId = res.result.openid;\r\n                    //         window.user.classicsLevelNum = 0;\r\n                    //         window.user.netLevelNum = 0;\r\n                    //         window.user.levelFinishNum = 0;\r\n                    //         window.user.roles = '';\r\n                    //         // wx.request({\r\n                    //         //     url: cloudFunctionBaseUrl+\"/queryUser\",\r\n                    //         //     method: 'POST',\r\n                    //         //     data:{\r\n                    //         //\r\n                    //         //     },\r\n                    //         //     success: (res) => {\r\n                    //         //\r\n                    //         //     }\r\n                    //         // });\r\n                    //         wx.cloud.callFunction({\r\n                    //             name: 'queryUser',\r\n                    //             data:{\r\n                    //                 appId: window.user.appId\r\n                    //             }\r\n                    //         }).then(res => {\r\n                    //\r\n                    //             if(res && res.result.data.length<=0){\r\n                    //                 //注册用户信息\r\n                    //                 // wx.request({\r\n                    //                 //     url: cloudFunctionBaseUrl+\"/queryUser\",\r\n                    //                 //     method: 'POST',\r\n                    //                 //     data:{\r\n                    //                 //\r\n                    //                 //     },\r\n                    //                 //     success: (res) => {\r\n                    //                 //\r\n                    //                 //     }\r\n                    //                 // });\r\n                    //                 wx.cloud.callFunction({\r\n                    //                     name: 'addUser',\r\n                    //                     data: {\r\n                    //                         appId: window.user.appId,\r\n                    //                         nickName: window.loginInfo.nickName? window.loginInfo.nickName:'游客'+window.user.appId.substring(window.user.appId.length-5),\r\n                    //                         portrait: window.loginInfo.avatarUrl\r\n                    //                     }\r\n                    //\r\n                    //                 }).then(res => {\r\n                    //                     console.log(res)\r\n                    //                 }).catch(err => {\r\n                    //                     console.error(err)\r\n                    //                 })\r\n                    //             }else{\r\n                    //                 window.user.levelFinishNum = res.result.data[0].levelFinishNum;\r\n                    //                 window.user.classicsLevelNum = res.result.data[0].classicsLevelNum;\r\n                    //                 window.user.netLevelNum = res.result.data[0].netLevelNum;\r\n                    //                 window.user.roles = res.result.data[0].roles;\r\n                    //             }\r\n                    //\r\n                    //         }).catch(err => {\r\n                    //             console.error(err)\r\n                    //         })\r\n                    //\r\n                    //     }\r\n                    // }).catch(err => {\r\n                    //     console.error(err)\r\n                    // })\r\n\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mainBindEvent(){\r\n        let that = this;\r\n        //添加授权按钮\r\n        wxLogin(function (res) {\r\n            window.loginInfo = {\r\n                avatarUrl: res.avatarUrl,\r\n                nickName: res.nickName\r\n            }\r\n        },function () {\r\n            console.log('授权失败')\r\n        },this.loginplay.node);\r\n        //开始游戏按钮\r\n        if(this.loginplay == null) this.loginplay = cc.find('Canvas/mainBg/loginplay').getComponent(cc.Button)\r\n        this.loginplay.node.on('click', this.loginLevelList, this)\r\n        if(this.visitorplay == null) this.visitorplay = cc.find('Canvas/mainBg/visitorplay').getComponent(cc.Button)\r\n        this.visitorplay.node.on('click', this.visitorLevelList, this)\r\n        if(this.mainRank == null) this.mainRank = cc.find('Canvas/mainBg/mainRank').getComponent(cc.Button)\r\n        this.mainRank.node.on('click', this.showMainRank, this)\r\n\r\n        if(this.reviewLevel == null) this.reviewLevel = cc.find('Canvas/mainBg/reviewLevel').getComponent(cc.Button)\r\n        this.reviewLevel.node.on('click', this.showReviewLevel, this)\r\n\r\n        if(this.buildLevel == null) this.buildLevel = cc.find('Canvas/mainBg/buildLevel').getComponent(cc.Button)\r\n        this.buildLevel.node.on('click', function () {\r\n            window.buildLevel = new Array();\r\n            if(window.wxLoginBtn ) window.wxLoginBtn.destroy();\r\n            cc.director.loadScene(\"build\");\r\n\r\n        }, this)\r\n        if(this.mainShare == null) this.mainShare = cc.find('Canvas/mainBg/mainShare').getComponent(cc.Button);\r\n        this.mainShare.node.on('click', function () {\r\n            if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                var titString =  '快来挑战“益智推箱”小游戏吧！';\r\n                wx.shareAppMessage({\r\n                    title: titString,\r\n                    // imageUrl: data.url,\r\n                    query: '分享',\r\n                })\r\n\r\n            }\r\n        }, this)\r\n        if(this.setting == null) this.setting = cc.find('Canvas/mainBg/setting').getComponent(cc.Button);\r\n        this.setting.node.on('click', function () {\r\n\r\n            var CanvasNode = cc.find('Canvas');\r\n            if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n            var onResourceLoaded = function(errorMessage, loadedResource )\r\n            {\r\n                if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n                if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n                var newMyPrefab = cc.instantiate( loadedResource );\r\n                cc.find('settingContain/closeSetting',newMyPrefab).on('click',function () {\r\n                    newMyPrefab.removeFromParent();\r\n                    newMyPrefab.destroy();\r\n                },this)\r\n\r\n                let touchMove = cc.find('settingContain/touchMove/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let clickMove = cc.find('settingContain/clickMove/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let relast = cc.find('settingContain/relast/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let music = cc.find('settingContain/music/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n\r\n                if(window.setting.touchMove) touchMove.string = '关闭触摸移动';\r\n                    else touchMove.string = '开启触摸移动';\r\n                if(window.setting.clickMove) clickMove.string = '关闭按键移动';\r\n                else clickMove.string = '开启按键移动';\r\n                if(window.setting.relast) relast.string = '关闭回退功能';\r\n                else relast.string = '开启回退功能';\r\n                if(window.setting.music) music.string = '关闭音效';\r\n                else music.string = '开启音效';\r\n\r\n                cc.find('settingContain/touchMove',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n                                //触摸&点击开启\r\n                                if(res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.touchMove = false;\r\n                                    touchMove.string = '开启触摸移动'\r\n                                }\r\n                                //触摸关闭 点击开启\r\n                                else if(!res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.touchMove = true;\r\n                                    touchMove.string = '关闭触摸移动'\r\n                                }\r\n                                else{\r\n                                    //提示至少开启一种移动方式\r\n                                    Toast('至少开启一种移动方式!',1500)\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/clickMove',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n                                //触摸&点击开启\r\n                                if(res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.clickMove = false;\r\n                                    clickMove.string = '开启按键移动'\r\n                                }\r\n                                //触摸关闭 点击开启\r\n                                else if(res.data.touchMove && !res.data.clickMove){\r\n                                    window.setting.clickMove = true;\r\n                                    clickMove.string = '关闭按键移动'\r\n                                }\r\n                                else{\r\n                                    //提示至少开启一种移动方式\r\n                                    Toast('至少开启一种移动方式!',1500)\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/relast',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n\r\n                                //回退功能\r\n                                if(res.data.relast){\r\n                                    window.setting.relast = false;\r\n                                    relast.string = '开启回退功能'\r\n                                }else{\r\n                                    window.setting.relast = true;\r\n                                    relast.string = '关闭回退功能'\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/music',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n\r\n                                //回退功能\r\n                                if(res.data.music){\r\n                                    window.setting.music = false;\r\n                                    music.string = '开启音效'\r\n                                }else{\r\n                                    window.setting.music = true;\r\n                                    music.string = '关闭音效'\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting,\r\n                                    complete(){\r\n                                        that.setMusic();\r\n                                    }\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n\r\n                CanvasNode.addChild( newMyPrefab );\r\n            };\r\n            cc.loader.loadRes('settingDialog', onResourceLoaded );\r\n\r\n            }, this)\r\n\r\n\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME && !window.gameCircle){\r\n            let sysInfo = wx.getSystemInfoSync();\r\n            //游戏圈按钮\r\n            window.gameCircle =  wx.createGameClubButton({\r\n                icon: 'white',\r\n                style: {\r\n                    left: (sysInfo.windowWidth*0.9)-20,\r\n                    top: sysInfo.windowHeight*0.12,\r\n                    width: 40,\r\n                    height: 40\r\n                }\r\n            })\r\n        }\r\n\r\n\r\n    },\r\n    initSetting(){\r\n        var that = this;\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getStorage({\r\n                key: 'setting',\r\n                success(res) {\r\n                    window.setting = res.data;\r\n                },\r\n                fail(err) {\r\n                    window.setting = {\r\n                        touchMove: true,\r\n                        clickMove: true,\r\n                        relast: false,\r\n                        music: false\r\n                    };\r\n                    wx.setStorage({\r\n                        key: 'setting',\r\n                        data: window.setting\r\n                    })\r\n                },\r\n                complete(){\r\n                    that.setMusic();\r\n                }\r\n            })\r\n        }\r\n    },\r\n    setMusic(){\r\n        if(cc.sys.platform !== cc.sys.WECHAT_GAME) return;\r\n\r\n        if(window.setting.music){\r\n            if(!window.bgMusic || !window.moveMusic){\r\n                window.bgMusic = wx.createInnerAudioContext();\r\n                window.moveMusic = wx.createInnerAudioContext({useWebAudioImplement:true});\r\n                cc.resources.load(\"music/bg_music\", cc.AudioClip, null, function (err, clip) {\r\n                    window.bgMusic.src =clip.url;\r\n                    window.bgMusic.loop = true;\r\n                    if(window.bgMusic && !window.bgMusic.paused) window.bgMusic.pause();\r\n                    if(window.bgMusic && window.bgMusic.paused) window.bgMusic.play();\r\n                });\r\n                cc.resources.load(\"music/move_music\", cc.AudioClip, null, function (err, clip) {\r\n                    window.moveMusic.src =clip.url;\r\n                    window.moveMusic.loop = false;\r\n                    window.moveMusic.playbackRate = 2;\r\n                });\r\n            }\r\n\r\n        }else{\r\n            if(window.bgMusic){\r\n                window.bgMusic.stop();\r\n                window.bgMusic.destroy();\r\n            }\r\n            if(window.moveMusic){\r\n                window.moveMusic.stop();\r\n                window.moveMusic.destroy();\r\n            }\r\n            window.bgMusic = null;\r\n            window.moveMusic = null;\r\n        }\r\n    }\r\n});\r\n"]}