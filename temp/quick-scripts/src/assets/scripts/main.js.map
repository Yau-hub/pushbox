{"version":3,"sources":["assets\\scripts\\main.js"],"names":["window","env","cc","sys","platform","WECHAT_GAME","wx","cloud","init","user","classicsLevelNum","netLevelNum","levelIndex","bgUrlBase","levelFinishNum","Class","Component","properties","oneSayLabel","type","Label","loginplay","Button","visitorplay","levelLayout","Prefab","buildLevel","setting","mainShare","onLoad","mainBindEvent","start","that","Loading","show","callFunction","name","then","res","console","log","result","total","hide","err","error","getUserInfo","initSetting","loadImg","container","find","imgServeUrl","imgUrl","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","images","urlbase","assetManager","loadRemote","texture","sprite","SpriteFrame","spriteFrame","starNode","Node","setPosition","starSprite","addComponent","Sprite","sizeMode","node","width","winSize","height","addChild","open","send","oneSay","url","getComponent","string","hitokoto","from","loginLevelList","loginType","CanvasNode","onResourceLoaded","errorMessage","loadedResource","newMyPrefab","instantiate","loader","loadRes","visitorLevelList","getStorage","key","success","appId","data","length","fail","setStorage","openid","loginInfo","avatarUrl","nickName","on","titString","shareAppMessage","title","query","removeFromParent","destroy","touchMove","clickMove"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nwindow.env = \"cloud1-5gvbuiy3dd99f63c\"\r\nif (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n    wx.cloud.init({env: window.env})\r\n}\r\nwindow.user = {};\r\nwindow.classicsLevelNum = 0;\r\nwindow.netLevelNum = 0;\r\nwindow.levelIndex = 0;\r\nwindow.bgUrlBase = '';\r\nwindow.user.levelFinishNum = 0;\r\n\r\n\r\nimport levels from './level'\r\nimport {wxLogin,Toast,Loading} from \"./common\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        oneSayLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        loginplay: cc.Button,\r\n        visitorplay: cc.Button,\r\n        levelLayout: cc.Prefab,\r\n        buildLevel: cc.Button,\r\n        setting: cc.Button,\r\n        mainShare: cc.Button,\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    // LIFE-CYCL:E CALLBACKS:\r\n\r\n     onLoad () {\r\n        //加载一言\r\n        //  this.oneSay();\r\n         this.mainBindEvent();\r\n\r\n\r\n     },\r\n\r\n    start () {\r\n        let that = this;\r\n\r\n\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME){\r\n            // wx.cloud.callFunction({\r\n            //     name: 'addClassicsLevel',\r\n            //     data:{\r\n            //         content: levels[0],\r\n            //         levelIndex: 1\r\n            //     }\r\n            // }).then(res => {\r\n            //     console.log(res)\r\n            //     wx.cloud.callFunction({\r\n            //         name: 'addClassicsLevel',\r\n            //         data:{\r\n            //             content: levels[1],\r\n            //             levelIndex: 2\r\n            //         }\r\n            //     }).then(res => {\r\n            //         console.log(res)\r\n            //     }).catch(err => {\r\n            //         console.error(err)\r\n            //     })\r\n            // }).catch(err => {\r\n            //     console.error(err)\r\n            // })\r\n\r\n            Loading.show();\r\n            wx.cloud.callFunction({\r\n                name: 'getClassicsLevelNum'\r\n            }).then(res => {\r\n                console.log('load err')\r\n                window.classicsLevelNum = res.result.total;\r\n                Loading.hide();\r\n\r\n            }).catch(err => {\r\n                console.error(err)\r\n                console.log('load err1')\r\n            })\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        // this.loadImg();\r\n        //\r\n        // setInterval(function () {\r\n        //     that.oneSay();\r\n        // },10000)\r\n\r\n        this.getUserInfo();\r\n        this.initSetting();\r\n\r\n\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n\r\n\r\n\r\n    loadImg: function(){\r\n        var that = this;\r\n        let container = cc.find('Canvas/mainBg/bingBg');//图片呈现位置\r\n        var imgServeUrl = 'https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1';\r\n        var imgUrl = '';\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response =  JSON.parse(xhr.responseText);\r\n                imgUrl = 'https://cn.bing.com' + response.images[0].urlbase + '_720x1280.jpg'\r\n                window.bgUrlBase = 'https://cn.bing.com' + response.images[0].urlbase;\r\n\r\n                cc.assetManager.loadRemote(imgUrl, function (err, texture) {\r\n                    var sprite  = new cc.SpriteFrame(texture);\r\n                    container.spriteFrame = sprite;\r\n                    //创建一个使用图片资源的新节点对象\r\n                    let starNode = new cc.Node(); //创建一个新节点\r\n                    starNode.name = \"star1\";\r\n                    starNode.setPosition(0,0);\r\n                    let starSprite = starNode.addComponent(cc.Sprite); //增加精灵组件\r\n                    starSprite.spriteFrame = sprite; //设置精灵组件图片资源\r\n                    starSprite.sizeMode = 'CUSTOM';\r\n                    starSprite.node.width = cc.winSize.width\r\n                    starSprite.node.height = cc.winSize.height\r\n                    container.addChild(starNode); //场景中增加新节点\r\n                });\r\n            }\r\n        };\r\n        xhr.open(\"get\", imgServeUrl, true);\r\n        xhr.send();\r\n    },\r\n    oneSay(){\r\n        let that = this;\r\n        let url = \"https://v1.hitokoto.cn/\";\r\n        let xhr = new XMLHttpRequest();\r\n        let oneSayLabel = cc.find(\"Canvas/mainBg/oneSay\").getComponent(cc.Component);\r\n\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response =  JSON.parse(xhr.responseText);\r\n               if(that.oneSayLabel && that.oneSayLabel.string != null) that.oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n               else if(oneSayLabel && oneSayLabel.string != null ) oneSayLabel.string = response.hitokoto + ' -- ' +  response.from;\r\n            }\r\n        };\r\n        xhr.open(\"get\", url, true);\r\n        xhr.send();\r\n    },\r\n    //授权登录显示关卡列表\r\n    loginLevelList(){\r\n\r\n        window.loginType = 'wechat';\r\n        var CanvasNode = cc.find('Canvas');\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('levelLayout', onResourceLoaded );\r\n    },\r\n    //不登录登录显示关卡列表\r\n    visitorLevelList(){\r\n\r\n        window.loginType = 'visitor';\r\n        var CanvasNode = cc.find('Canvas');\r\n        if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n        var onResourceLoaded = function(errorMessage, loadedResource )\r\n        {\r\n            if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n            if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n            var newMyPrefab = cc.instantiate( loadedResource );\r\n            CanvasNode.addChild( newMyPrefab );\r\n        };\r\n        cc.loader.loadRes('levelLayout', onResourceLoaded );\r\n\r\n        // let levelList = cc.instantiate(this.levelLayout);\r\n        // this.node.addChild(levelList);\r\n    },\r\n    getUserInfo(){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            //获取缓存appId判断是否第一次进入游戏\r\n            wx.getStorage({\r\n                key: 'appId',\r\n                success (res) {\r\n                    window.user.appId = res.data;\r\n                    wx.cloud.callFunction({\r\n                        name: 'queryUser',\r\n                        data:{\r\n                            appId: window.user.appId\r\n                        }\r\n                    }).then(res => {\r\n                        if(res && res.result.data.length>0){\r\n                            window.user.levelFinishNum = res.result.data[0].levelFinishNum;\r\n                            window.user.classicsLevelNum = res.result.data[0].classicsLevelNum;\r\n                            window.user.netLevelNum = res.result.data[0].netLevelNum;\r\n                        }\r\n\r\n                    }).catch(err => {\r\n                        console.error(err)\r\n                    })\r\n                },\r\n                fail(err){\r\n\r\n\r\n                    wx.cloud.callFunction({\r\n                        name: 'login'\r\n                    }).then(res => {\r\n                        if(res && res.result){\r\n                            wx.setStorage({\r\n                                key: \"appId\",\r\n                                data:res.result.openid\r\n                            })\r\n                            window.user.appId = res.result.openid;\r\n                            window.user.classicsLevelNum = 0;\r\n                            window.user.netLevelNum = 0;\r\n                            window.user.levelFinishNum = 0;\r\n\r\n                            wx.cloud.callFunction({\r\n                                name: 'queryUser',\r\n                                data:{\r\n                                    appId: window.user.appId\r\n                                }\r\n                            }).then(res => {\r\n                                if(res && res.result.data.length<=0){\r\n                                    //注册用户信息\r\n                                    wx.cloud.callFunction({\r\n                                        name: 'addUser',\r\n                                        data: {\r\n                                            appId: window.user.appId\r\n                                        }\r\n\r\n                                    }).then(res => {\r\n                                        console.log(res)\r\n                                    }).catch(err => {\r\n                                        console.error(err)\r\n                                    })\r\n                                }\r\n\r\n                            }).catch(err => {\r\n                                console.error(err)\r\n                            })\r\n\r\n                        }\r\n                    }).catch(err => {\r\n                        console.error(err)\r\n                    })\r\n\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mainBindEvent(){\r\n        let that = this;\r\n        //添加授权按钮\r\n        wxLogin(function (res) {\r\n            window.loginInfo = {\r\n                avatarUrl: res.avatarUrl,\r\n                nickName: res.nickName\r\n            }\r\n        },function () {\r\n            console.log('授权失败')\r\n        },this.loginplay.node);\r\n        //开始游戏按钮\r\n        if(this.loginplay == null) this.loginplay = cc.find('Canvas/mainBg/loginplay').getComponent(cc.Button)\r\n        this.loginplay.node.on('click', this.loginLevelList, this)\r\n        if(this.visitorplay == null) this.visitorplay = cc.find('Canvas/mainBg/visitorplay').getComponent(cc.Button)\r\n        this.visitorplay.node.on('click', this.visitorLevelList, this)\r\n\r\n        if(this.mainShare == null) this.mainShare = cc.find('Canvas/mainBg/mainShare').getComponent(cc.Button);\r\n        this.mainShare.node.on('click', function () {\r\n            if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                var titString =  '快来挑战“益智推箱”小游戏吧！';\r\n                wx.shareAppMessage({\r\n                    title: titString,\r\n                    // imageUrl: data.url,\r\n                    query: '分享',\r\n                })\r\n\r\n            }\r\n        }, this)\r\n\r\n\r\n        if(this.setting == null) this.setting = cc.find('Canvas/mainBg/setting').getComponent(cc.Button);\r\n        this.setting.node.on('click', function () {\r\n\r\n            var CanvasNode = cc.find('Canvas');\r\n            if( !CanvasNode ) { cc.console( 'find Canvas error' ); return; }\r\n            var onResourceLoaded = function(errorMessage, loadedResource )\r\n            {\r\n                if( errorMessage ) { console.log( 'Prefab error:' + errorMessage ); return; }\r\n                if( !( loadedResource instanceof cc.Prefab ) ) { console.log( 'Prefab error' ); return; }\r\n                var newMyPrefab = cc.instantiate( loadedResource );\r\n                cc.find('settingContain/closeSetting',newMyPrefab).on('click',function () {\r\n                    newMyPrefab.removeFromParent();\r\n                    newMyPrefab.destroy();\r\n                },this)\r\n\r\n                let touchMove = cc.find('settingContain/touchMove/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n                let clickMove = cc.find('settingContain/clickMove/Background/Label',newMyPrefab).getComponent(cc.Label);\r\n\r\n                if(window.setting.touchMove) touchMove.string = '关闭触摸移动';\r\n                    else touchMove.string = '开启触摸移动';\r\n                if(window.setting.clickMove) clickMove.string = '关闭按键移动';\r\n                else clickMove.string = '开启按键移动';\r\n\r\n                cc.find('settingContain/touchMove',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n                                //触摸&点击开启\r\n                                if(res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.touchMove = false;\r\n                                    touchMove.string = '开启触摸移动'\r\n                                }\r\n                                //触摸关闭 点击开启\r\n                                else if(!res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.touchMove = true;\r\n                                    touchMove.string = '关闭触摸移动'\r\n                                }\r\n                                else{\r\n                                    //提示至少开启一种移动方式\r\n                                    Toast('至少开启一种移动方式!',1500)\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n                cc.find('settingContain/clickMove',newMyPrefab).on('click',function () {\r\n                    if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                        wx.getStorage({\r\n                            key:'setting',\r\n                            success(res){\r\n                                //触摸&点击开启\r\n                                if(res.data.touchMove && res.data.clickMove){\r\n                                    window.setting.clickMove = false;\r\n                                    clickMove.string = '开启按键移动'\r\n                                }\r\n                                //触摸关闭 点击开启\r\n                                else if(res.data.touchMove && !res.data.clickMove){\r\n                                    window.setting.clickMove = true;\r\n                                    clickMove.string = '关闭按键移动'\r\n                                }\r\n                                else{\r\n                                    //提示至少开启一种移动方式\r\n                                    Toast('至少开启一种移动方式!',1500)\r\n                                }\r\n                                wx.setStorage({\r\n                                    key:'setting',\r\n                                    data:window.setting\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                },this)\r\n\r\n\r\n\r\n                CanvasNode.addChild( newMyPrefab );\r\n            };\r\n            cc.loader.loadRes('settingDialog', onResourceLoaded );\r\n        }, this)\r\n\r\n    },\r\n    initSetting(){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getStorage({\r\n                key: 'setting',\r\n                success(res) {\r\n                    window.setting = res.data;\r\n                },\r\n                fail(err) {\r\n                    window.setting = {\r\n                        touchMove: true,\r\n                        clickMove: true\r\n                    };\r\n                    wx.setStorage({\r\n                        key: 'setting',\r\n                        data: window.setting\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n});\r\n"]}